学习了虚拟化技术后，要把容器理解为是一种特殊的进程。

Linux基于`Namespace`实现资源**隔离**，基于`Cgroups`实现进程资源**限制**。

> “Docker大热之后，热衷技术的开发者就会思考，想要实现一个资源隔离的容器，应该从哪些方面下手？也许第一反应就是chroot命令，这条命令给用户最直观的感受就是在使用后根目录/的挂载点切换了，即<u>文件系统被隔离</u>了。接着，为了在分布式的环境下进行通信和定位，容器必然要有独立的IP、端口、路由等，自然就联想到了<u>网络的隔离</u>。同时，容器还需要一个<u>独立的主机名</u>以便在网络中标识自己。有了网络，自然离不开通信，也就想到了<u>进程间通信需要隔离</u>。开发者可能也已经想到了权限的问题，对用户和用户组的隔离就实现了<u>用户权限的隔离</u>。最后，运行在容器中的应用需要有进程号（PID），自然也需要与宿主机中的<u>PID进行隔离</u>。
由此，基本上完成了一个容器所需要做的6项隔离”

摘录来自
Docker——容器与容器云（第2版）

## 容器网络

TODO

## 容器文件系统

### Mount Namespace

Mount Namespace为容器提供了新的文件系统视图，但是需要配合`mount`命令，对需要修改的目录进行挂载。

- 挂载的从属关系

TODO

### rootfs

rootfs为应用提供了操作系统层级的运行环境一致性。

它是一个包含操作系统运行所需的必要文件和目录结构的文件系统。它包括了操作系统的核心文件、用户空间程序、库文件、设备文件等，是系统启动后挂载的第一个文件系统。

### 镜像

Docker镜像使用UnionFS技术，增量创建rootfs，将多个文件系统联合挂载到同一个目录下，使其看上去像一个文件系统。

- 镜像的底层由一些只读层组成，它们是操作系统最基本的一些文件和目录。

- 镜像的顶层是一个读写层，它包含了应用程序运行所需的文件和目录。

## 参考资料/阅读清单

书籍

- [ ] Docker容器与容器云

网站资料

- [x] 深入剖析Kubernetes，白话容器基础系列

- [ ] https://coolshell.cn/articles/17010.html

- [ ] https://coolshell.cn/articles/17029.html

- [ ] https://coolshell.cn/articles/17049.html

- [ ] https://coolshell.cn/articles/17061.html

- [ ] https://coolshell.cn/articles/17200.html

